<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" /> 
  <title>Mini editor for Paysage</title>
  <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
  <script src="https://cdn.socket.io/socket.io-1.3.7.js"></script>
</head>
<body>
<div class="programmer-part">
  <div class="controls">
    <label for="playgroundid">Where:</label><br>
    <input type="text" id="playgroundid" value="boumsplash"><br>
    <label for="codeid">What:</label><br>
    <input type="text" id="codeid" value="my_creature"></input><br>
    <textarea id="code" rows="20" cols="80">void draw() {
  background(0,0);

  translate(200 + 100 * Math.cos(millis()/1000), 200 + 100 * Math.sin(millis() / 1000));

  fill(0);
  text("Bande de punaisesÂ !", 0, 0);
}
    </textarea><br>
    <button id="bouton">go live!</button>
  </div>
</div>
<script>
(function() {
  "use strict";
  var server = 'http://127.0.0.1:3000/';
  // Update server var if in the query string:
  var url = window.location.toString();
  if (url.indexOf('?') >= 0) {
    server = url.substring(url.indexOf('?') + 1);
  }
  io = io.connect(server);

  document.getElementById('bouton').addEventListener('click',
    function(){
      var codeid = document.getElementById('codeid').value;
      var playgroundid = document.getElementById('playgroundid').value;
      var code = document.getElementById('code').value;
      var data = {codeid: codeid, playgroundid: playgroundid, code: code}
      io.emit('code update', data);
    });

  io.emit('programmer up', document.getElementById('playgroundid').value);

}());


</script>
</body>
</html>
